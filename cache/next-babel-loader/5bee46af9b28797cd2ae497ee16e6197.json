{"ast":null,"code":"import { Post } from 'src/models';\nimport { connectToDatabase } from 'src/utils';\nexport default async function createPost(req, res) {\n  if (req.method === 'POST') {\n    try {\n      await connectToDatabase();\n      const body = JSON.parse(res.body);\n      console.log(body);\n      const newPost = new Post(body);\n      const saved = await newPost.save();\n      res.send(saved);\n    } catch (err) {\n      console.log(err);\n      res.status(500).send('error');\n    }\n  } else {\n    res.status(405).json({\n      message: 'Method not allowed'\n    });\n  }\n}","map":{"version":3,"sources":["D:/0. Tai/Work/Code/test/test-next/test-next-frontend/test-nextjs/pages/api/posts/create.ts"],"names":["Post","connectToDatabase","createPost","req","res","method","body","JSON","parse","console","log","newPost","saved","save","send","err","status","json","message"],"mappings":"AACA,SAASA,IAAT,QAAqB,YAArB;AAEA,SAAQC,iBAAR,QAAgC,WAAhC;AAEA,eAAe,eAAeC,UAAf,CAA0BC,GAA1B,EAA8CC,GAA9C,EAAqE;AAChF,MAAID,GAAG,CAACE,MAAJ,KAAc,MAAlB,EAAyB;AACrB,QAAG;AACC,YAAMJ,iBAAiB,EAAvB;AACA,YAAMK,IAAY,GAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACE,IAAf,CAArB;AAEAG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACA,YAAMK,OAAO,GAAG,IAAIX,IAAJ,CAASM,IAAT,CAAhB;AACA,YAAMM,KAAK,GAAG,MAAMD,OAAO,CAACE,IAAR,EAApB;AACAT,MAAAA,GAAG,CAACU,IAAJ,CAASF,KAAT;AACH,KARD,CAQC,OAAMG,GAAN,EAAU;AACPN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACAX,MAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,OAArB;AACH;AACJ,GAbD,MAaO;AACHV,IAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,OAAO,EAAE;AAAV,KAArB;AACH;AAEJ","sourcesContent":["import {NextApiRequest, NextApiResponse} from 'next'\r\nimport { Post } from 'src/models'\r\nimport { IPost } from 'src/models/Post'\r\nimport {connectToDatabase} from 'src/utils'\r\n\r\nexport default async function createPost(req:NextApiRequest, res : NextApiResponse) {\r\n    if (req.method ==='POST'){\r\n        try{\r\n            await connectToDatabase()\r\n            const body : IPost = JSON.parse(res.body)\r\n\r\n            console.log(body)\r\n            const newPost = new Post(body)\r\n            const saved = await newPost.save()\r\n            res.send(saved)\r\n        }catch(err){\r\n            console.log(err)\r\n            res.status(500).send('error')\r\n        }\r\n    } else {\r\n        res.status(405).json({message: 'Method not allowed'})\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}